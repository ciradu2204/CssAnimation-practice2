(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1011:function(t,s,e){"use strict";(function(t){var i=e(700),n=e(1012),a=e.n(n),o=e(529),r=i.a.extend({className:"video-roll-overlay preview-roll-overlay",template:a.a,templateData:function(){return t.extend(this.model.attributes,{parentClass:this.model.parentClass.attributes})},events:{"click .replay":"onClickReplay","click .view-class":"onClickViewClass"},onClickReplay:function(){this.trigger("replay")},onClickViewClass:function(){var t=this.model.parentClass,s=t.get("video");s.session_id&&t.get("id")&&(this.completion=new o.a,this.completion.set({target_type:"Session",target_id:s.session_id,parent_id:t.get("id"),completed:!0}),this.completion.save())}});s.a=r}).call(this,e(10))},1012:function(t,s){t.exports='<div class="video-roll-overlay-image background-image-cover" style="background-image: url({{parentClass.image}})"></div>\n<div class="video-roll-overlay-buttons">\n    <div class="video-roll-overlay-button">\n        <a href="javascript:;" class="btn transparent large-wide replay">Replay</a>\n    </div>\n    <div class="video-roll-overlay-button">\n        <a href="{{parentClass.previewUrl}}" class="btn transparent large-wide view-class" target="_blank">View Class</a>\n    </div>\n</div>\n'},323:function(t,s,e){"use strict";e.r(s),function(t){e(34);var i=e(8),n=e(732),a=e(1011),o=e(537),r=e(587),l=e(733),c=e(802),u=i.a.extend({el:"#embed-wrapper",parentClass:null,session:null,videoPlayer:null,$titleOverlay:null,$videoPlayer:null,initialize:function(){this.model=new t.Model,i.a.prototype.initialize.apply(this,arguments)},afterRender:function(){this.$embed=this.$(".video-embed:first"),this.$videoPlayer=this.$(".video-player-module:first"),this.initializeParentClass(),this.initializeSession(),this.initializeVideoPlayer(),this.initializeWishlistButton(),this.addThumbnailOverlay(),i.a.prototype.afterRender.apply(this,arguments)},initializeParentClass:function(){this.parentClass=new r.a(SS.serverBootstrap.parentClass),this.model.parentClass=this.parentClass},initializeSession:function(){this.session=new l.a(SS.serverBootstrap.session,{parentClass:this.parentClass})},initializeVideoPlayer:function(){this.videoPlayer=new n.a({el:this.$videoPlayer,video:c.a.sessionToVideo(this.session)}),this.videoPlayer.once("video:player:ready",function(){this.videoPlayer.initializeSkillshareButton()},this),this.listenTo(this.videoPlayer,"video:player:play",this.onVideoPlayerPlay),this.listenTo(this.videoPlayer,"video:player:ended",this.onVideoPlayerEnded),this.listenTo(this.videoPlayer,"video:player:skillshareButtonClick",this.onVideoPlayerSkillshareButtonClick)},initializeWishlistButton:function(){SS.currentUser.isGuest()||new o.a({container:this.$(".wishlist-button-container"),isLabelButton:!0,labels:["Save","Saved"],showListPopover:!1,styles:"button alt-charcoal-ghost",modelData:{parent_sku:this.parentClass.get("sku"),wishlistId:this.parentClass.get("wishlistId")}})},onVideoPlayerPlay:function(){this.removeThumbnailOverlay()},onVideoPlayerEnded:function(){this.removeVideoRollOverlay(),this.videoRollOverlay=new a.a({container:this.$embed.find(".video-overlay-wrapper"),model:this.model}),this.listenTo(this.videoRollOverlay,"replay",this.onVideoOverlayReplay)},onVideoOverlayReplay:function(){this.removeVideoRollOverlay(),this.videoPlayer.replay()},onVideoPlayerSkillshareButtonClick:function(){window.open(this.parentClass.get("videoEmbedUrl"))},removeVideoRollOverlay:function(){this.videoRollOverlay&&this.videoRollOverlay.remove()},addThumbnailOverlay:function(){var t=this.session.getThumbnailForVideoPlayer();this.$embed.find(".thumbnail-overlay").css("background-image","url('".concat(t,"')"))},removeThumbnailOverlay:function(){this.$embed.find(".thumbnail-overlay-wrapper").hide()}});s.default=new u}.call(this,e(15))},507:function(t,s,e){"use strict";var i=e(20),n=e(70),a=e(88);i(i.P+i.F*e(31)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var s=n(this),e=a(s);return"number"!=typeof e||isFinite(e)?s.toISOString():null}})},511:function(t,s,e){"use strict";var i=e(20),n=e(61),a=e(70),o=e(31),r=[].sort,l=[1,2,3];i(i.P+i.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!e(72)(r)),"Array",{sort:function(t){return void 0===t?r.call(a(this)):r.call(a(this),n(t))}})},512:function(t,s,e){"use strict";(function(t,e){var i=t.Model.extend({initialize:function(){t.Model.prototype.initialize.apply(this,arguments),this.on("change:errors",this.onErrorChange,this)},onErrorChange:function(t,s,i){e.isEmpty(s)?this.trigger("valid"):this.trigger("invalid",t,s,i)}});s.a=i}).call(this,e(15),e(10))},515:function(t,s,e){"use strict";(function(t){var i=e(532),n=t.Collection.extend({model:i.a,defaults:{id:null}});s.a=n}).call(this,e(15))},523:function(t,s,e){"use strict";var i=e(514).a.extend({urlRoot:"/watchlist",defaults:{isWatching:!1}},{VIA_LOGGED_IN_HOME:"logged-in-home",VIA_LOGGED_IN_HOME_ROW:"logged-in-home-row",VIA_LOGGED_IN_HOME_PREVIEW:"logged-in-home-preview",VIA_LOGGED_IN_HOME_YOUR_CLASSES:"logged-in-home-your-classes",VIA_PREVIEW_RELATED_CLASSES:"preview-related-classes",VIA_BROWSE:"browse",VIA_SEARCH:"search"});s.a=i},529:function(t,s,e){"use strict";var i=e(514).a.extend({urlRoot:"/completions",defaults:{completed:!1}});s.a=i},532:function(t,s,e){"use strict";(function(t,i){var n=e(13),a=t.Model.extend({url:function(){return this.get("following")?"/tags/"+this.get("id")+"/follow":"/tags/"+this.get("id")+"/unfollow"},constructor:function(s){this.options=i.extend({},s),this.parentClass=this.options.collection&&this.options.collection.parentClass,t.Model.prototype.constructor.apply(this,arguments)},sync:function(){n.a.ajaxRequest(this.url(),i.extend({},this.attributes,{type:"POST"}))},toggleFollow:function(){this.set({following:!this.get("following")}),this.sync()}});s.a=a}).call(this,e(15),e(10))},535:function(t,s,e){"use strict";(function(t){var e=t.Collection.extend({constructor:function(){this.on("add remove rerank",this.remapRanks),t.Collection.apply(this,arguments),this.trigger("rerank")},comparator:function(t){return parseInt(t.get("rank"),10)},moveModelTo:function(t,s){this.remove(t,{silent:!0}),this.add(t,{at:s,silent:!0}),this.trigger("rerank")},remapRanks:function(){this.each(function(t,s){t.set("rank",s)})}});s.a=e}).call(this,e(15))},537:function(t,s,e){"use strict";(function(t){e(40);var i=e(41),n=e(523),a=e(613),o=e.n(a),r=e(571),l=i.a.extend({requiresLogin:!0,showNotifications:!0,showListPopover:!0,template:o.a,initialize:function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.bindAll(this,"onStateChange","destroyPopover"),t.extend(this,t.pick(s,["activeClass","inactiveClass","markAsCheckedClass","showNotifications","showListPopover","template"])),s.isLabelButton?(s.labels?this.labels=s.labels:this.labels=['<svg class="ss-svg-icon"><use xlink:href="#save" /></svg> Save','<svg class="ss-svg-icon"><use xlink:href="#saved" /></svg> Saved'],this.templateData={isLabelButton:!0}):s.hasPopovers?this.popovers=["Save for Later","Unsave"]:this.tooltips=["Save for Later","Unsave"],this.templateData.styles=s.styles,!this.model){var e=t.pick(s.modelData,"parent_sku","trackingParams");!1!==s.modelData.wishlistId&&(e.id=s.modelData.wishlistId),this.model=new n.a(e)}this.initialState=this.model.get("id")?i.a.states.ACTIVE:i.a.states.INACTIVE,this.activeClass&&(this.templateData.activeClass=this.getInitalClass()),this.on("save",this.onSuccessfulSave),this.on("destroy",this.onSuccessfulDestroy),this.model.on("change:state",this.onStateChange),i.a.prototype.initialize.apply(this,arguments)},getInitalClass:function(){return this.initialState===i.a.states.ACTIVE?this.markAsCheckedClass?this.markAsCheckedClass:this.activeClass:this.inactiveClass},toggleListPopover:function(t){var s=this;this.showListPopover&&(this.listPopover&&this.listPopover.isOpen()&&t?this.listPopover.onAnchorClick(t):setTimeout(function(){s.setUpPopover(),t?s.listPopover.onAnchorClick(t):s.listPopover.open()},0))},onUndoSave:function(){var t=i.a.states.INACTIVE;this.setState(t),this.sync(),this.trigger("click",t),this.$el.removeClass("click")},isMarkedAsChecked:function(){return this.markAsCheckedClass&&this.$el.hasClass(this.markAsCheckedClass)},onStateChange:function(t){this.activeClass&&this.inactiveClass&&!this.isMarkedAsChecked()&&(t.get("state")===i.a.states.ACTIVE?(this.$el.removeClass(this.inactiveClass),this.$el.addClass(this.activeClass)):t.get("state")===i.a.states.INACTIVE&&(this.$el.addClass(this.inactiveClass),this.$el.removeClass(this.activeClass)))},onClick:function(t){this.showListPopover&&this.toggleListPopover(t),this.model.get("id")&&this.showListPopover||i.a.prototype.onClick.apply(this,arguments)},onSuccessfulSave:function(){this.showNotifications&&SS.events.trigger("alerts:create",{title:"Saved to",action:"/lists/saved-classes",actionString:"All Saved Classes",type:"success-sticky",buttonString:"Undo",buttonCb:this.onUndoSave.bind(this)}),this.markAsCheckedClass&&(this.$el.removeClass([this.activeClass,this.inactiveClass].join(" ")),this.$el.addClass(this.markAsCheckedClass)),SS.events.trigger("wishlistAdded",this.model),fbq&&fbq("track","AddToWishlist",{content_ids:[this.model.get("parent_sku")]}),this.listPopover&&this.listPopover.fetchLists()},onSuccessfulDestroy:function(){this.showNotifications&&SS.events.trigger("alerts:create",{title:"Class removed.",type:"success-sticky"}),this.markAsCheckedClass&&this.$el.removeClass(this.markAsCheckedClass),SS.events.trigger("wishlistRemoved",this.model)},setUpPopover:function(){this.listPopover||(this.popoverContainer=document.createElement("div"),this.popoverContainer.className="popover shadow bottom save-list-container js-popover-container",this.listPopover=new r.a({autoPosition:!0,showOnHover:!1,placement:"bottom",arrowPlacement:"top",anchor:this.container,el:this.popoverContainer,parentSku:this.model.get("parent_sku")}),this.listPopover.on("popover:close",this.destroyPopover),this.model.get("id")&&this.listPopover.fetchLists())},destroyPopover:function(){this.listPopover.dispose(),this.listPopover=null}});s.a=l}).call(this,e(10))},543:function(t,s,e){"use strict";(function(t){var e=t.Model.extend({url:function(){return this.isNew()?"/lists/new":"/lists/"+this.get("id")+"/edit"}});s.a=e}).call(this,e(15))},553:function(t,s,e){"use strict";(function(t,i){var n=e(607),a=t.Collection.extend({model:n.a,comparator:function(t){return parseInt(t.get("rank"),10)},initialize:function(t,s){this.session=s.session},updateAttachmentWithResponse:function(t){var s=i.first(this.where(i.pick(t,"title")));return s&&s.set(t),this},deleteWhere:function(t){var s=this.where(t);return s&&(this.remove(s),i.each(s,function(t){t.trigger("destroy")})),this}});s.a=a}).call(this,e(15),e(10))},554:function(t,s,e){"use strict";e(126)("small",function(t){return function(){return t(this,"small","","")}})},568:function(t,s,e){"use strict";(function(t,i){e(507),e(122),e(123),e(124);var n=e(529),a=e(512),o=e(553),r=a.a.extend({sessionEvent:null,constructor:function(){this.attachments=new o.a([],{session:this}),this.completion=new n.a,t.Model.prototype.constructor.apply(this,arguments)},initialize:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.parentClass=s.parentClass||s.collection.parentClass,this.set("cid",this.cid),this.id||this.set("isNew",!0),this.sessionEvent=this.getSessionEvent(),this.sessionEvent.on("invalid",function(t,s){this.trigger("invalid",t,s)},this),this.on("destroy",function(){this.sessionEvent.trigger("destroy",this.sessionEvent)}),a.a.prototype.initialize.apply(this,arguments)},getSessionEvent:function(){var t,s=this.parentClass.currentClass.sessionEvents;return(t=this.id?s.where({session_id:this.id})[0]:s.where({session_cid:this.cid})[0])||(t=s.add({session_cid:this.cid},{currentClass:this.parentClass.currentClass})),t},parse:function(t){var s=i.clone(t);return s.rank=parseInt(s.rank,10),this.completion.set({target_type:"Session",target_id:s.id,parent_id:s.parent_id}),i.isUndefined(s.sessionCompletion)||(this.completion.set(s.sessionCompletion,{parse:!0}),this.completion.set({completed:!0})),s.index=(parseInt(s.rank,10)+1).toString(),s.attachments=this.convertCids(s.attachments),this.attachments.set(s.attachments,{parse:!0}),delete s.attachments,s},convertCids:function(t){return i.map(t,function(t){var s=this.attachments.get(t.id||t.cid);return s&&s.set(s.parse(t)),s||t},this)},filterCompletions:function(t){var s=this;i.each(t,function(t){s.get("id")===t.target_id&&"Session"===t.target_type&&s.updateCompletion(t)})},updateCompletion:function(t){this.completion.set(t),i.isUndefined(t.id)||this.completion.set("completed",!0)},toJSON:function(){var t=i.clone(this.attributes);return t.attachments=this.attachments.toJSON(),t},recursiveMap:function(t){var s=[];return s.push(t.call(this,this)),s.push(i.map(this.attachments.models,function(s){s.recursiveMap(t)})),s}});s.a=r}).call(this,e(15),e(10))},571:function(t,s,e){"use strict";(function(t,i){e(40),e(511);var n=e(13),a=e(543),o=e(35),r=e(579),l=e.n(r),c=o.a.extend({className:"save-list-popover",template:l.a,templateData:{},initialize:function(t){this.options=t||{},this.model=new a.a,this.parentSku=this.options.parentSku,this.templateData.hasLoaded=!1,this.customListId=this.options.customListId?this.options.customListId:null;for(var s=arguments.length,e=new Array(s>1?s-1:0),i=1;i<s;i++)e[i-1]=arguments[i];o.a.prototype.initialize.apply(this,[t].concat(e))},afterRender:function(){t.bindAll(this,"onSubmitList","onCreateListFocus","onClickCancel","onClickCreate","onSelectExistingList","onKeydownListInput"),i(".submit-list-name").on("click",this.onSubmitList),i(".list-input").on("focus",this.onCreateListFocus),i(".first-list-cancel").on("click",this.onClickCancel),i(".existing-list-action").on("click",this.onClickCreate),i(".existing-item").on("click",this.onSelectExistingList),i(".list-input").on("keypress",this.onKeydownListInput);for(var s=arguments.length,e=new Array(s),n=0;n<s;n++)e[n]=arguments[n];o.a.prototype.afterRender.apply(this,e)},onSelectExistingList:function(t){t.preventDefault();var s=i(t.target);s.hasClass("selected")?this.removeClassFromList(s.data("list-id")):this.addClassToList(s.data("list-id"))},fetchLists:function(){var t=this;n.a.ajaxRequest("/lists/user",{type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",data:{parent_sku:this.parentSku,custom_list_id:this.customListId},success:function(s){var e=s;e instanceof Array&&e.length>1&&(e=e.sort(function(t,s){return t.title.localeCompare(s.title)})),t.templateData.listData=e,t.templateData.firstList=0===e.length,t.templateData.hasLoaded=!0,t.render(),t.updateVisiblePopover(),t.focusListInput(),t.reposition()}})},onSubmitList:function(t){var s=this;t.preventDefault();var e=i(".list-input").val();""===e?this.onCreateListError("List name is required."):(this.model.set({title:e,via:"save-list-popover"}),this.model.save().then(function(t){s.addClassToList(t.id)}).fail(function(t){var e=t.responseJSON.attributes,i=e&&e.title?e.title[0]:"There was an error saving your list";s.onCreateListError(i)}))},onClickCancel:function(t){t.preventDefault(),this.close()},onCreateListError:function(t){i(".list-input").addClass("list-input-error"),i(".create-list-error").show(),i(".create-list-error-message").html(t)},onCreateListFocus:function(){i(".list-input").removeClass("list-input-error"),i(".create-list-error").hide(),i(".create-list-error-message").html("")},focusListInput:function(){i(".list-input").focus()},onKeydownListInput:function(t){13===t.which&&this.onSubmitList(t)},addClassToList:function(t){var s=this;this.sendListClassRequest("add-class",t,function(e){s.unmarkListAsComplete(t,"Unable to save class"),SS.events.trigger("alerts:create",{title:"Saved to",action:e.url,actionString:e.title,type:"success-sticky"}),s.close()},"Unable to save class")},removeClassFromList:function(t){var s=this;this.sendListClassRequest("remove-class",t,function(){SS.events.trigger("alerts:create",{title:"Removed class from list",type:"success-sticky"}),s.close()},"Unable to remove class")},sendListClassRequest:function(t,s,e,i){var a=this;n.a.ajaxRequest("/lists/".concat(s,"/").concat(t),{data:JSON.stringify({parent_sku:this.parentSku,customListId:s,via:"save-list-popover"}),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:e,error:function(){SS.events.trigger("alerts:create",{title:i,type:"error"}),a.close()}})},unmarkListAsComplete:function(t,s){var e=this;n.a.ajaxRequest("/lists/".concat(t,"/complete"),{data:JSON.stringify({id:t,is_complete:0,mark_all_as_complete:!1}),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(){},error:function(){SS.events.trigger("alerts:create",{title:s,type:"error"}),e.close()}})},onClickCreate:function(t){t.preventDefault(),i(".list-content").hide(),i(".create-new-list").show(),i(".list-cancel").on("click",this.onClickBackToList.bind(this)),this.focusListInput()},onClickBackToList:function(){i(".list-content").show(),i(".create-new-list").hide()}});s.a=c}).call(this,e(10),e(9))},579:function(t,s){t.exports='<div class="save-list-popover">\n    <div class="inner-popover">\n        <div class="arrow-cover"></div>\n        <div class="arrow"></div>\n        <div class="content">\n          {{#hasLoaded}}\n            <div class="save-list">\n                <p class="list-header">Add this class to a list</p>\n                <div class="create-new-list{{^firstList}} hidden{{/firstList}}">\n                    <div class="playlist-form">\n                        <input class="list-input" title="list-input" id="list-name" placeholder="List Name" maxlength="50">\n                        <div class="create-list-error">\n                            <span class="create-list-error-message"></span>\n                        </div>\n                        <div class="playlist-action">\n                            <a href="javascript:;" class="{{#firstList}}first-{{/firstList}}list-cancel">{{#firstList}}Cancel{{/firstList}}{{^firstList}}Back{{/firstList}}</a>\n                            <button type="submit" class="button submit-list-name">Save</button>\n                        </div>\n                    </div>\n                </div>\n                {{^firstList}}\n                    <div class="list-content">\n                        <div class="existing-list">\n                            {{#listData}}\n                                <div class="existing-item{{#classIsInList}} selected{{/classIsInList}}" data-list-id="{{customListId}}">{{title}}{{#classIsInList}}<img class="status-icon{{#classIsInList}} selected{{/classIsInList}}" src="/assets/images/icon-check.png" data-list-id="{{customListId}}" />{{/classIsInList}}</div>\n                            {{/listData}}\n                        </div>\n                        <div class="existing-list-action">+ create new list</div>\n                    </div>\n                {{/firstList}}\n            </div>\n            {{/hasLoaded}}\n            {{^hasLoaded}}\n                <div class="save-list loading-overlay">\n                </div>\n            {{/hasLoaded}}\n        </div>\n    </div>\n</div>\n'},587:function(t,s,e){"use strict";(function(t,i,n){e(122),e(185),e(121),e(507);var a=e(604),o=e(515),r=e(608),l=e(512),c=e(553),u=l.a.extend({urlRoot:"/listings",lastServerState:null,units:null,currentClass:null,dontOverWriteModels:0,constructor:function(s){this.units=new a.a(null,{parentClass:this}),this.attachments=new c.a([],{parentClass:this}),s.parentClass?this.tags=new o.a(s.parentClass.tags):this.tags=new o.a(s.tags),this.currentClass=new r.a(null,{parentClass:this}),t.Model.prototype.constructor.apply(this,arguments)},initialize:function(){var t=this;i.defer(function(){t.lastServerState=t.toJSON()}),this.on("sync",function(){this.lastServerState=this.toJSON()}),this.on("request",function(t,s,e){this.units.each(function(t){t.trigger("request",t,s,e)})}),l.a.prototype.initialize.apply(this,arguments)},onErrorChange:function(t,s,e){s.syllabus||s.units?(this.units.trigger("invalid",t,{syllabus:s.syllabus},e),delete s.syllabus):this.units.trigger("valid",t,{syllabus:s.syllabus},e),this.trigger("invalid",t,s,e),l.a.prototype.onErrorChange.apply(this,arguments)},treeHasChanged:function(){return!i.isEqual(this.toJSON(),this.lastServerState)},revertToLastSyncState:function(){this.set(this.parse(this.lastServerState))},isOnline:function(){return"1"===this.get("is_hybrid")||1===this.get("is_hybrid")},isLocal:function(){return!this.isOnline()},isPublished:function(){return"1"===this.get("status_id")||1===this.get("status_id")},isDraft:function(){return"2"===this.get("status_id")||2===this.get("status_id")},isPendingReview:function(){return"3"===this.get("status_id")||3===this.get("status_id")},isMembershipClass:function(){return"1"===this.get("enrollment_type")||"2"===this.get("enrollment_type")},getPreviewUrl:function(){var t=this.get("title")||"untitled-class";return t=t.trim().replace(/ /g,"-").replace(/[^\w-]+/g,""),this.get("sku")?"/"+t+"/"+this.get("sku")+"/"+this.currentClass.get("id"):"#"},parse:function(t){if(this.dontOverWriteModels>0)return this.dontOverWriteModels--,this.setSessionIds(t.parentClass),void this.set("errors",t.parentClass.errors);var s=i.clone(t);i.isUndefined(s.currentClass)||(this.currentClass.set(this.currentClass.parse(s.currentClass)),delete s.currentClass);var e=i.isUndefined(s.parentClass)?s:s.parentClass;return e.units=this.convertCids(e.units),this.units.set(e.units,{parse:!0}),delete s.units,this.attachments.set(e.attachments,{parse:!0}),delete e.attachments,e},setSessionIds:function(t){var s=this;t.units&&i.each(t.units,function(t){i.each(t.sessions,function(t){t.id&&t.cid&&s.findSessionByCid(t.cid).set("id",t.id)})})},findSessionByCid:function(t){var s;return this.units.each(function(e){var i=e.sessions.get({cid:t});i&&(s=i)}),s},toJSON:function(t){var s=i.clone(this.attributes);return s.units=this.units.toJSON(t),s.attachments=this.attachments.toJSON(t),s.tags=this.tags.toJSON(t),{parentClass:s,currentClass:this.currentClass.toJSON(t)}},sync:function(s,e,n){if(i.isUndefined(n.data)&&e&&("create"===s||"update"===s||"patch"===s)){n.contentType="application/json";var a=n.attrs||e.toJSON(n);a.action=n.action||"save",n.data=JSON.stringify(a)}return t.sync.apply(this,arguments)},deleteDraft:function(t){var s={YII_CSRF_TOKEN:n.cookie("YII_CSRF_TOKEN"),sku:this.get("sku")};n.ajax({type:"POST",url:"/listings/deletedraft",data:s,success:t})},convertCids:function(t){return i.map(t,function(t){var s=this.units.get(t.cid);return s&&s.set(s.parse(t)),s||t},this)},recursiveMap:function(t){var s=[];return s.push(t.call(this,this)),s.push(this.currentClass.recursiveMap(t)),s.push(this.units.map(function(s){s.recursiveMap(t)})),s.push(this.attachments.map(function(s){s.recursiveMap(t)})),s}});s.a=u}).call(this,e(15),e(10),e(9))},604:function(t,s,e){"use strict";var i=e(535),n=e(605),a=i.a.extend({model:n.a,initialize:function(t,s){this.parentClass=s.parentClass,this.on("add remove",this.toggleModelDestroyable)},toggleModelDestroyable:function(){var t=this.length>1;this.invoke("toggleDestroyable",t)}});s.a=a},605:function(t,s,e){"use strict";(function(t,i){e(122),e(507);var n=e(606),a=e(529),o=e(512),r=o.a.extend({constructor:function(s,e){this.parentClass=e.collection.parentClass,this.lectures=this.sessions=new n.a(null,{parentClass:this.parentClass,unit:this}),this.completion=new a.a,t.Model.apply(this,arguments)},defaults:{destroyable:!0},initialize:function(){this.set("cid",this.cid),this.on("request",function(t,s,e){this.sessions.each(function(t){t.trigger("request",t,s,e)})}),this.on("destroy",function(){this.sessions.each(function(t){t.trigger("destroy",t)})}),o.a.prototype.initialize.apply(this,arguments)},parse:function(t){var s=i.clone(t);return s.rank=parseInt(s.rank,10),s.sessions=this.convertCids(s.sessions),this.sessions.set(s.sessions,{parse:!0}),delete s.sessions,this.completion.set({target_type:"Unit",target_id:s.id,parent_id:s.parent_id}),i.isUndefined(s.unitCompletion)||(this.completion.set(s.unitCompletion,{parse:!0}),this.completion.set({completed:!0})),s},toJSON:function(){var t=i.omit(this.attributes,"destroyable");return t.sessions=this.sessions.toJSON(),t},convertCids:function(t){return i.map(t,function(t){var s=this.sessions.get(t.id);return s||(s=this.sessions.get(t.cid)),s&&s.set(s.parse(t)),s||t},this)},recursiveMap:function(t){var s=[];return s.push(t.call(this,this)),s.push(this.sessions.map(function(s){s.recursiveMap(t)})),s},toggleDestroyable:function(t){this.set("destroyable",t)}});s.a=r}).call(this,e(15),e(10))},606:function(t,s,e){"use strict";var i=e(535),n=e(568),a=i.a.extend({model:n.a,initialize:function(t,s){this.parentClass=s.parentClass,this.unit=s.unit},onAdd:function(t){t.set("unit_id",this.unit.get("id")),i.a.prototype.onAdd.apply(this,arguments)}});s.a=a},607:function(t,s,e){"use strict";var i=e(512),n=i.a.extend({defaults:{url:"#"},initialize:function(){this.set("cid",this.cid),i.a.prototype.initialize.apply(this,arguments)},recursiveMap:function(t){return t.call(this,this)},isComplete:function(){return this.get("url")!==this.defaults.url}});s.a=n},608:function(t,s,e){"use strict";(function(t,i){e(187),e(122),e(507);var n=e(609),a=e(512),o=a.a.extend({constructor:function(s,e){return this.sessionEvents=new n.a(null,{parentClass:e.parentClass}),this.parentClass=e.parentClass,t.Model.prototype.constructor.apply(this,arguments)},onErrorChange:function(t,s){s.sessionEvents&&delete s.sessionEvents,a.a.prototype.onErrorChange.apply(this,arguments)},isNewDate:function(){return!0===this.get("isNewDate")},parse:function(t){var s=i.clone(t);return s.sessionEvents=this.convertCids(s.sessionEvents),this.sessionEvents.set(s.sessionEvents,{parse:!0,remove:!1}),delete s.sessionEvents,s},toJSON:function(){var t=i.clone(this.attributes);return t.sessionEvents=this.sessionEvents.toJSON(),t.isNewDate=void 0,t},convertCids:function(t){return i(t).map(function(t){var s=this.sessionEvents.get(t.cid);return s&&s.set(s.parse(t)),s||t},this)},recursiveMap:function(t){var s=[];return s.push(t.call(this,this)),s.push(i.map(this.sessionEvents.models,function(s){s.recursiveMap(t)})),i.flatten(s)},areAllSessionEventsNew:function(){return i.every(this.sessionEvents.models,function(t){return t.isNew()},this)}});s.a=o}).call(this,e(15),e(10))},609:function(t,s,e){"use strict";(function(t){var i=e(610),n=t.Collection.extend({model:i.a,initialize:function(t,s){this.parentClass=s.parentClass}});s.a=n}).call(this,e(15))},610:function(t,s,e){"use strict";(function(t,i){e(507);var n=e(611),a=e(512),o=a.a.extend({currentClass:null,defaults:{time_zone:t.isUndefined(SS.serverBootstrap.classCreatorData)?8:SS.serverBootstrap.classCreatorData.userTimeZone.id,startTime:"7:30 pm",endTime:"9:00 pm"},constructor:function(t){this.venue=new n.a,this.currentClass=t.currentClass,i.Model.prototype.constructor.apply(this,arguments)},initialize:function(){this.set("cid",this.cid),a.a.prototype.initialize.apply(this,arguments)},onErrorChange:function(s,e,i){t.isEmpty(e)?this.trigger("valid"):(e.start_time&&(e.startTime=e.startDate=e.start_time),e.end_time&&(e.endTime=e.endDate=e.end_time),this.trigger("invalid",s,e,i))},parse:function(s){var e=t.clone(s);return this.venue.set(this.venue.parse(e.venue)),delete e.venue,e},toJSON:function(){var s=t.clone(this.attributes);return this.collection.parentClass.isOnline()||(s.venue=this.venue.toJSON()),s},recursiveMap:function(t){return t.call(this,this)}});s.a=o}).call(this,e(10),e(15))},611:function(t,s,e){"use strict";(function(t,e){var i=t.Model.extend({defaults:{geo_state_abbr:"AK"},initialize:function(){this.on("change:errors",function(t,s,i){e.isEmpty(s)||this.trigger("invalid",t,s,i)})}});s.a=i}).call(this,e(15),e(10))},613:function(t,s){t.exports='<a href="javascript:;" class="wishlist-button{{#styles}} {{styles}} {{/styles}}{{^isLabelButton}} circle-btn circle-wishlist-btn ss-icon-bookmark{{/isLabelButton}}">{{initialContent}}</a>\n'},673:function(t,s,e){"use strict";(function(t,e){var i=t.Model.extend({urlRoot:"/notes",defaults:{privacy_status:1},initialize:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.session&&this.setSession(s.session)},setSession:function(t){this.session=t,this.set({session_id:this.session.id})},isValid:function(){for(var t=["body","session_id","video_time","privacy_status"],s=0;s<t.length;s++){var i=this.get(t[s]);if(e.isUndefined(i)||e.isNull(i))return!1}return!0},isCurrentUsers:function(){return SS.currentUser.get("username")===this.get("author").username}});s.a=i}).call(this,e(15),e(10))},703:function(t,s,e){"use strict";var i=e(86),n=e(673),a=i.a.extend({url:"/notes",model:n.a,comparator:"update_time",parse:function(t){return i.a.prototype.parse.apply(this,arguments),this.total=t.total,t.notes}});s.a=a},733:function(t,s,e){"use strict";(function(t,i,n){e(554);var a=e(529),o=e(734),r=t.Model.extend({playbackStates:{PAUSED:0,PLAYING:1,ENDED:3},constructor:function(s){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.unit=e.unit,this.completion=new a.a,this.notes=new o.a([],{session:this}),t.Model.apply(this,arguments)},initialize:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fetchNotes&&this.notes.fetchSet()},parse:function(t){var s=i.clone(t);return this.completion.set({target_type:"Session",target_id:s.id,parent_id:s.parent_id}),s.sessionCompletion&&(this.completion.set(s.sessionCompletion,{parse:!0}),this.completion.set({completed:!0})),s},setVideoId:function(t){if(this.get("videoId"))return t();var s=this;n.ajax({url:"/sessions/"+this.get("id")+"/video",dataType:"json",success:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.video_hashed_id&&s.set("videoId",e.video_hashed_id),t()},error:function(){t()}})},isFirstOverall:function(){return 0===this.get("overallRank")},isFirstInUnit:function(){return 0===this.get("rank")},isCompleted:function(){return this.completion.get("completed")},getThumbnailForVideoPlayer:function(){var t,s=this.get("thumbnails");if(!s)return null;if(i.has(s,"large"))t=s.large;else if(i.has(s,"huge"))t=s.huge;else if(i.has(s,"medium"))t=s.medium;else{if(!i.has(s,"small"))return null;t=s.small}return t},setPaused:function(){this.set("playbackState",this.playbackStates.PAUSED)},setPlaying:function(){this.set("playbackState",this.playbackStates.PLAYING)},setEnded:function(){this.set("playbackState",this.playbackStates.ENDED)},isPaused:function(){return this.get("playbackState")===this.playbackStates.PAUSED},isPlaying:function(){return this.get("playbackState")===this.playbackStates.PLAYING},isEnded:function(){return this.get("playbackState")===this.playbackStates.ENDED}});s.a=r}).call(this,e(15),e(10),e(9))},734:function(t,s,e){"use strict";(function(t){var i=e(703),n=e(568),a=i.a.extend({session:null,initialize:function(s,e){t.extend(this,t.pick(e,["session"])),this.initializeSession(),i.a.prototype.initialize.apply(this,arguments)},initializeSession:function(){t.isNull(this.session)&&(this.session=n.a),this.listenTo(this,"set",this.onSet),this.listenTo(this,"update",this.onUpdate)},url:function(){return"/sessions/"+this.session.get("id")+"/notesData"},setSessionOnModels:function(){t.each(this.models,function(t){t.setSession(this.session)},this)},onSet:function(){this.setSessionOnModels()},onUpdate:function(){this.setSessionOnModels()}});s.a=a}).call(this,e(10))},802:function(t,s,e){"use strict";e(121);var i=e(735),n={sessionToVideo:function(t){var s=t.get("brightcove_id");return s||(s=(t.get("videoId")||"").replace("bc:","")),new i.a({platform_video_id:s,thumbnails:t.get("thumbnails")})}};s.a=n}}]);
//# sourceMappingURL=pages-embed-video.b77153ad5daae76a4be6.build.min.js.map